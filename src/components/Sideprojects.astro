---
import sideprojects from "../../public/sideprojects.json";
---

<script>
  let isOpen = false;

  document.getElementById("sideprojects-headline")!.addEventListener("click", function () {
    if (isOpen) {
      document.getElementById("sideprojects-text")!.innerHTML = "Click to open";
      document.getElementById("sideprojects-links")!.style.display = "none";
      document.getElementById("sideprojects-links")!.style.opacity = "0";
      isOpen = false;
    } else {
      document.getElementById("sideprojects-text")!.innerHTML = "Click to close";
      document.getElementById("sideprojects-links")!.style.display = "flex";
      setTimeout(() => {
        document.getElementById("sideprojects-links")!.style.opacity = "1";
      }, 75);
      isOpen = true;
    }
  });
</script>

<div
  class="my-8 flex max-w-fit flex-col self-center rounded-lg border border-gray-900 bg-blackAcrylic p-5 text-center text-white backdrop-blur-[2px]"
>
  <div id="sideprojects-headline" class="cursor-pointer select-none underline">
    <h2>Sideprojects</h2>
    <span id="sideprojects-text">Click to open</span>
  </div>

  <div
    id="sideprojects-links"
    class="flex max-w-fit flex-col items-center justify-evenly transition-opacity ease-in-out md:flex-row"
    style="display: none; opacity: 0;"
  >
    {
      sideprojects.map((sideproject) => {
        return (
          <div class="mx-0 my-1 rounded-lg border border-white p-2 transition duration-300 hover:backdrop-blur-sm md:h-full md:max-w-[25%]">
            <h3 class="underline">
              <a class="" href={sideproject.href} target="_blank" rel="noopener noreferrer">
                {sideproject.name}
              </a>
            </h3>
            <span class="pointer-events-none cursor-default">{sideproject.desc}</span>
          </div>
        );
      })
    }
  </div>
</div>
